<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example for the use for flatxml • flatxml</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Example for the use for flatxml">
<meta property="og:description" content="flatxml">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-99973049-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99973049-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">flatxml</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../reference/flatxml.html">Getting Started</a>
</li>
<li>
  <a href="../../reference/index.html">Package Reference</a>
</li>
<li>
  <a href="../../articles/example/example.html">Example</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/jsugarelli">
    <span class="fa fa-twitter fa-lg"></span>
     
    Twitter
  </a>
</li>
<li>
  <a href="https://topics-in-r.blogspot.de/">
    <span class="fa fa-rss fa-lg"></span>
     
    R Blog
  </a>
</li>
<li>
  <a href="http://wp13011521.server-he.de/rpackages/subscribe.php">
    <span class="fa fa-code fa-lg"></span>
     
    Newsletter
  </a>
</li>
<li>
  <a href="../../mailto:joachim@zuckarelli.de">
    <span class="fa fa-envelope fa-lg"></span>
     
    E-mail
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Example for the use for flatxml</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jsugarelli/flatxml/blob/master/vignettes/example/example.rmd"><code>vignettes/example/example.rmd</code></a></small>
      <div class="hidden name"><code>example.rmd</code></div>

    </div>

    
    
<!-- author: "Joachim Zuckarelli"
date: "25 Juni 2018" -->
<p><strong>Please note: This is only a first introductory example. The examples section will be extended in the near future.</strong></p>
<p>As an example let’s load an XML file exported from the database of the United Nations Statistics Division. This step may take some time as the XML file is quite large, so be patient when you reproduce these results in R. Please <a href="https://www.zuckarelli.de/flatxml/worldpopulation.xml">click here</a> to download the dataset.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">flatxml</span>)
<span class="no">xml.dataframe</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/fxml_importXMLFlat.html">fxml_importXMLFlat</a></span>(<span class="st">"https://www.zuckarelli.de/flatxml/worldpopulation.xml"</span>)</pre></body></html></div>
<pre><code>## No encoding supplied: defaulting to UTF-8.</code></pre>
<p><code>fxml_importXMLFlat</code> returns a dataframe. This dataframe represents the hierarchical structure of the XML document. All other functions from the <code>flatxml</code> package work with this kind of representation of the XML document.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">xml.dataframe</span>, <span class="fl">20</span>)</pre></body></html></div>
<pre><code>##     elem. elemid. attr.          value. level1 level2 level3 level4
## 1    ROOT       1  &lt;NA&gt;            &lt;NA&gt;   ROOT   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;
## 2    data       2  &lt;NA&gt;            &lt;NA&gt;   ROOT   data   &lt;NA&gt;   &lt;NA&gt;
## 3  record       3  &lt;NA&gt;            &lt;NA&gt;   ROOT   data record   &lt;NA&gt;
## 4   field       4  &lt;NA&gt;     Afghanistan   ROOT   data record  field
## 5   field       4  name Country or Area   ROOT   data record  field
## 6   field       5  &lt;NA&gt;            2016   ROOT   data record  field
## 7   field       5  name            Year   ROOT   data record  field
## 8   field       6  &lt;NA&gt;      Both Sexes   ROOT   data record  field
## 9   field       6  name             Sex   ROOT   data record  field
## 10  field       7  &lt;NA&gt;        27657145   ROOT   data record  field
## 11  field       7  name           Value   ROOT   data record  field
## 12  field       8  &lt;NA&gt;               1   ROOT   data record  field
## 13  field       8  name Value Footnotes   ROOT   data record  field
## 14 record       9  &lt;NA&gt;            &lt;NA&gt;   ROOT   data record   &lt;NA&gt;
## 15  field      10  &lt;NA&gt;     Afghanistan   ROOT   data record  field
## 16  field      10  name Country or Area   ROOT   data record  field
## 17  field      11  &lt;NA&gt;            2016   ROOT   data record  field
## 18  field      11  name            Year   ROOT   data record  field
## 19  field      12  &lt;NA&gt;            Male   ROOT   data record  field
## 20  field      12  name             Sex   ROOT   data record  field</code></pre>
<p>Now, let’s extract the data from the flat representation (that still contains the hierachical information of the original document) into a dataframe to which all statistical functions can be applied. This is done with the <code>fxml_toDataFrame</code> function.</p>
<p>As we can see from above XML element no. 3 is on the level where the actual data is located (therefore <code>siblings.of=3</code>, which means, the elements carrying the data are siblings of this element). The field names are given as attributes in our example XML file, therefore we choose <code>elem.or.attr="attr"</code>. The name of the attribute that contains the field names is <code>name</code>, therefore we have <code>col.attr="name"</code>. And finally, we want to exclude all the footnotes from our dataframe. To accomplish this we exclude those fields with <code>exclude.fields=c("Value Footnote")</code>.</p>
<p>With this preparation, we are ready to go:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">population.df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/fxml_toDataFrame.html">fxml_toDataFrame</a></span>(<span class="no">xml.dataframe</span>, <span class="kw">siblings.of</span><span class="kw">=</span><span class="fl">3</span>, <span class="kw">elem.or.attr</span><span class="kw">=</span><span class="st">"attr"</span>,
<span class="kw">col.attr</span><span class="kw">=</span><span class="st">"name"</span>, <span class="kw">exclude.fields</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Value Footnotes"</span>))</pre></body></html></div>
<p>The result looks like this:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">population.df</span>, <span class="fl">20</span>)</pre></body></html></div>
<pre><code>##    Country or Area Year        Sex    Value
## 1      Afghanistan 2016 Both Sexes 27657145
## 2      Afghanistan 2016       Male 14149838
## 3      Afghanistan 2016     Female 13507307
## 4    Åland Islands 2016 Both Sexes    29099
## 5    Åland Islands 2016       Male    14526
## 6    Åland Islands 2016     Female    14573
## 7          Albania 2016 Both Sexes  2886026
## 8          Albania 2016 Both Sexes  2876101
## 9          Albania 2016       Male  1456000
## 10         Albania 2016     Female  1420101
## 11         Algeria 2016 Both Sexes 40835602
## 12         Algeria 2016       Male 20680271
## 13         Algeria 2016     Female 20155331
## 14         Andorra 2016 Both Sexes    72358
## 15         Andorra 2016 Both Sexes    71732
## 16         Andorra 2016       Male    36229
## 17         Andorra 2016       Male    36590
## 18         Andorra 2016     Female    35768
## 19         Andorra 2016     Female    35503
## 20       Argentina 2016 Both Sexes 43590368</code></pre>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joachim Zuckarelli.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
