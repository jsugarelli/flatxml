<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Converting between XML and dataframes — fxml_toDataFrame • flatxml</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Converting between XML and dataframes — fxml_toDataFrame" />
<meta property="og:description" content="Converts an XML document to a dataframe." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99973049-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99973049-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flatxml</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/flatxml.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">Package Reference</a>
</li>
<li>
  <a href="../articles/example/example.html">Example</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/jsugarelli">
    <span class="fa fa-twitter fa-lg"></span>
     
    Twitter
  </a>
</li>
<li>
  <a href="https://topics-in-r.blogspot.de/">
    <span class="fa fa-rss fa-lg"></span>
     
    R Blog
  </a>
</li>
<li>
  <a href="http://wp13011521.server-he.de/rpackages/subscribe.php">
    <span class="fa fa-code fa-lg"></span>
     
    Newsletter
  </a>
</li>
<li>
  <a href="../mailto:joachim@zuckarelli.de">
    <span class="fa fa-envelope fa-lg"></span>
     
    E-mail
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Converting between XML and dataframes</h1>
    <small class="dont-index">Source: <a href='https://github.com/jsugarelli/flatxml/blob/master/R/flatxml.r'><code>R/flatxml.r</code></a></small>
    <div class="hidden name"><code>fxml_toDataFrame.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Converts an XML document to a dataframe.</p>
    </div>

    <pre class="usage"><span class='fu'>fxml_toDataFrame</span>(
  <span class='no'>xmlflat.df</span>,
  <span class='no'>siblings.of</span>,
  <span class='kw'>same.tag</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>attr.only</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>attr.not</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>elem.or.attr</span> <span class='kw'>=</span> <span class='st'>"elem"</span>,
  <span class='kw'>col.attr</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>include.fields</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>exclude.fields</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>xmlflat.df</th>
      <td><p>A flat XML dataframe created with <code><a href='fxml_importXMLFlat.html'>fxml_importXMLFlat</a></code>.</p></td>
    </tr>
    <tr>
      <th>siblings.of</th>
      <td><p>ID of one of the XML elements that contain the data records. All data records need to be on the same hierarchical level as the XML element with this ID.</p></td>
    </tr>
    <tr>
      <th>same.tag</th>
      <td><p>If <code>TRUE</code>, only elements of the same type (<code>xmlflat.df$elem.</code>) as the element <code>sibling.of</code> are considered as data records. If <code>FALSE</code>,
<em>all</em> elements on the same hierarchical level as the element <code>sibling.of</code> are considered to be data records.</p></td>
    </tr>
    <tr>
      <th>attr.only</th>
      <td><p>A list of named vectors representing attribute/value combinations the data records must match.
The name of an element in the list is the XML element name to which the attribute belongs. The list element itself is a named vector.
The vector's elements represent different attributes (= the names of the vector elements) and their values (= vector elements).
Example: <code>attr.only = list(tag1 = c(attrib1 = "Value 1", attrib2 = "Value 2"), tag2 = c(attrib3 = "Value 3"))</code> will only include <code>tag1</code> elements of the form <code>&lt;tag1 attrib1 = "Value 1" attrib2 = "Value 2"&gt;</code> and <code>tag2</code> elements of the form <code>&lt;tag2 attrib3 = "Value 3"&gt;</code> as data records.</p></td>
    </tr>
    <tr>
      <th>attr.not</th>
      <td><p>A list of vectors representing attribute/value combinations the XML elements must <em>not</em> match to be considered as data records. See argument <code>attr.only</code> for details.</p></td>
    </tr>
    <tr>
      <th>elem.or.attr</th>
      <td><p>Either <code>"elem"</code> or <code>"attr"</code>. Defines, if the names of the record fields (columns in the dataframe) are represented by the names (tags) of the respective XML elements
(the children of the elements on the same level as <code>siblings.of</code>) (<code>"elem"</code>) or if the field names are given by some attribute of those tags (<code>"attr"</code>).</p></td>
    </tr>
    <tr>
      <th>col.attr</th>
      <td><p>If <code>elem.or.attr</code> is <code>"attr"</code> then <code>col.attr</code> specifies the name of the attribute that gives the record field / column names.</p></td>
    </tr>
    <tr>
      <th>include.fields</th>
      <td><p>A character vector with the names of the fields that are to be included in the result dataframe. By default, all fields from the XML document are included.</p></td>
    </tr>
    <tr>
      <th>exclude.fields</th>
      <td><p>A character vector with the names of the fields that should be excluded in the result dataframe. By default, no fields from the XML document are excluded.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dataframe with the data read in from the XML document.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Data that can be read in are either represented in this way:<br /> <br />
  <code>&lt;record&gt;</code><br />
    <code>&lt;field1&gt;Value of field1&lt;/field1&gt;</code><br />
    <code>&lt;field2&gt;Value of field2&lt;/field2&gt;</code><br />
    <code>&lt;field3&gt;Value of field3&lt;/field3&gt;</code><br />
  <code>&lt;/record&gt;</code><br />
  <code>...</code><br /> <br />
In this case <code>elem.or.attr</code> would need to be <code>"elem"</code> because the field names of the data records (<code>field1</code>, <code>field2</code>, <code>field3</code>) are the names of the elements.<br /> <br />
Or, the XML data could also look like this: <br /> <br />
  <code>&lt;record&gt;</code><br />
    <code>&lt;column name="field1"&gt;Value of field1&lt;/column&gt;</code><br />
    <code>&lt;column name="field2"&gt;Value of field2&lt;/column&gt;</code><br />
    <code>&lt;column name="field3"&gt;Value of field3&lt;/column&gt;</code><br />
  <code>&lt;/record&gt;</code><br />
  <code>...</code><br /> <br />
Here, the names of the fields are attributes, so <code>elem.or.attr</code> would need to be <code>"attr"</code> and <code>col.attr</code> would be set to
<code>"name"</code>, so <code>fxml_toDataframe()</code> knows where to look for the field/column names.<br /> <br />
In any case, <code>siblings.of</code> would be the ID (<code>xmlflat.df$elemid.</code>) of one of the <code>&lt;record&gt;</code> elements.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='fxml_importXMLFlat.html'>fxml_importXMLFlat</a></code>, <code><a href='fxml_toXML.html'>fxml_toXML</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Load example file with population data from United Nations Statistics Division</span>
<span class='co'># and create flat dataframe</span>
<span class='no'>example</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"worldpopulation.xml"</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>"flatxml"</span>)
<span class='no'>xml.dataframe</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='fxml_importXMLFlat.html'>fxml_importXMLFlat</a></span>(<span class='no'>example</span>)

<span class='co'># Extract the data out of the XML document. The data records are on the same hierarchical level</span>
<span class='co'># as element with ID 3 (xml.dataframe$elemid. ==  3).</span>
<span class='co'># The field names are given in the "name" attribute of the children elements of element no. 3</span>
<span class='co'># and its siblings</span>
<span class='no'>population.df</span> <span class='kw'>&lt;-</span> <span class='fu'>fxml_toDataFrame</span>(<span class='no'>xml.dataframe</span>, <span class='kw'>siblings.of</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>elem.or.attr</span><span class='kw'>=</span><span class='st'>"attr"</span>,
<span class='kw'>col.attr</span><span class='kw'>=</span><span class='st'>"name"</span>)
<span class='co'># Exclude the "Value Footnote" field from the returned dataframe</span>
<span class='no'>population.df</span> <span class='kw'>&lt;-</span> <span class='fu'>fxml_toDataFrame</span>(<span class='no'>xml.dataframe</span>, <span class='kw'>siblings.of</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>elem.or.attr</span><span class='kw'>=</span><span class='st'>"attr"</span>,
<span class='kw'>col.attr</span><span class='kw'>=</span><span class='st'>"name"</span>, <span class='kw'>exclude.fields</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Value Footnote"</span>))


<span class='co'># Load example file with soccer world cup data (data from</span>
<span class='co'># https://www.fifa.com/fifa-tournaments/statistics-and-records/worldcup/index.html)</span>
<span class='co'># and create flat dataframe</span>
<span class='no'>example2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"soccer.xml"</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>"flatxml"</span>)
<span class='no'>xml.dataframe2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='fxml_importXMLFlat.html'>fxml_importXMLFlat</a></span>(<span class='no'>example2</span>)

<span class='co'># Extract the data out of the XML document. The data records are on the same hierarchical level</span>
<span class='co'># as element with ID 3 (xml.dataframe$elemid. ==  3). #' # The field names are given as the name</span>
<span class='co'># of the children elements of element no. 3 and its siblings.</span>
<span class='no'>worldcups.df</span> <span class='kw'>&lt;-</span> <span class='fu'>fxml_toDataFrame</span>(<span class='no'>xml.dataframe2</span>, <span class='kw'>siblings.of</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>elem.or.attr</span><span class='kw'>=</span><span class='st'>"elem"</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joachim Zuckarelli.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


